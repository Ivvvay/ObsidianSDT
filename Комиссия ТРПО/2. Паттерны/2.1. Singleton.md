==**Паттерн Одиночка** - это порождающий паттерн, который гарантирует, что у класса есть только один экземпляр, и предоставлеяет глобальную точку доступа к этому экземпляру==

*Использование паттерна Одиночка:*
* Единственный экземпляр - когда в система должен существовать только один экземпляр класса (например, подключение к БД, логгер)
* Глобальный доступ - когда нужно предоставить глобальную точку доступа к этому экземпляру
* Контроль создания - когда нужно контролировать процесс создания экземпляра (например, ленивая инициализация)

*Преимущества паттерна Одиночка:*
* Контроль над экземпляром - гарантирует, что у класса будет только один экземпляр
* Глобальный доступ - упрощает доступ к экземпляру из любой части программы
* Ленивая инициализация - экземпляр создаётся только при первом обращении, что может экономить ресурсы

*Недостатки паттерна Одиночка:*
* Глобальное состояние - может привести к нежелательным побочным эффектам, так как экземпляр доступен глобально
* Тестирование - усложняет тестирование, так как экземпляр является глобальным и может сохранять состояние между тестами
* Нарушение принципа единой ответственности - класс берёт на себя две обязанности: управление своим экземпляром и выполнение своей основной задачи

*Рассмотрим UML-диаграмму паттерна Одиночка:*
![[Д®†£а†ђђ† ™Ђ†ббЃҐ.png]]
Пояснение к диаграмме:
* Singleton - класс, который содержит статический метод getInstance() для доступа к единственному экземпляру
* instance - статическое поле, которое хранит единственный экземпляр класса
* getInstance - статический метод, который возвращает экземпляр класса. Если экземпляр ещё не создан, он создаётся

```cpp
#include <iostream>

using namespace std;

class Singleton {
public:
  // Удаляем конструктор копирования и оператор присваивания
  Singleton(const Singleton& other) = delete;
  Singleton& operator=(const Singleton& other) = delete;

  // Метод для получения экземпляра
  static Singleton& getInstance() {
    static Singleton instance;
    return instance;
  }

  void doSomething() {
    cout << "Какое-то действие" << endl;
  }

private:
  Singleton() {
    cout << "Одиночка создан!" << endl;
  }

  ~Singleton() {
    cout << "Одиночка удалён!" << endl;
  }
};

int main() {
  setlocale(LC_ALL, "Rus");

  // Получаем экземпляр Singleton
  Singleton& singleton = Singleton::getInstance();
  singleton.doSomething();

  // Попытка создать ещё один экземпляр приведёт к ошибке
  //Singleton anotherSingleton;

  return 0;
}
```